{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\Desktop\\\\OSF\\\\client\\\\src\\\\components\\\\sign-in\\\\button.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Popup from './SignIn';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Button() {\n  _s();\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const history = useNavigate();\n  const logout = () => {\n    dispatch({\n      type: actionType.LOGOUT\n    });\n    history.push('/auth');\n    setUser(null);\n  };\n  useEffect(() => {\n    const token = user === null || user === void 0 ? void 0 : user.token;\n    if (token) {\n      const decodedToken = decode(token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n    setUser(JSON.parse(localStorage.getItem('profile')));\n  }, [location]);\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  function handleButtonClick() {\n    setIsPopupOpen(!isPopupOpen);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [user !== null && user !== void 0 && user.result ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          alt: user === null || user === void 0 ? void 0 : user.result.name,\n          src: user === null || user === void 0 ? void 0 : user.result.imageUrl,\n          children: user === null || user === void 0 ? void 0 : user.result.name.charAt(0)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: user === null || user === void 0 ? void 0 : user.result.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleButtonClick,\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), isPopupOpen && /*#__PURE__*/_jsxDEV(Popup, {\n        onClose: handleButtonClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n_s(Button, \"8oIBEwlYnYlFVJkN/vMqePQuQ+k=\", true);\n_c = Button;\nexport default Button;\nvar _c;\n$RefreshReg$(_c, \"Button\");","map":{"version":3,"names":["React","useState","Popup","Button","user","setUser","JSON","parse","localStorage","getItem","dispatch","useDispatch","location","useLocation","history","useNavigate","logout","type","actionType","LOGOUT","push","useEffect","token","decodedToken","decode","exp","Date","getTime","isPopupOpen","setIsPopupOpen","handleButtonClick","result","name","imageUrl","charAt"],"sources":["C:/Users/Hp/Desktop/OSF/client/src/components/sign-in/button.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Popup from './SignIn';\r\n\r\nfunction Button() {\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n    const history = useNavigate();\r\n\r\n    const logout = () => {\r\n        dispatch({ type: actionType.LOGOUT });\r\n    \r\n        history.push('/auth');\r\n    \r\n        setUser(null);\r\n      };\r\n\r\n    useEffect(() => {\r\n        const token = user?.token;\r\n    \r\n        if (token) {\r\n          const decodedToken = decode(token);\r\n    \r\n          if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n        }\r\n    \r\n        setUser(JSON.parse(localStorage.getItem('profile')));\r\n      }, [location]);\r\n\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n\r\n  function handleButtonClick() {\r\n    setIsPopupOpen(!isPopupOpen);\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <div>\r\n      {/* <button onClick={handleButtonClick}>Sign In</button> */}\r\n      {user?.result ? (\r\n        <div>\r\n          <img alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</img>\r\n          <h3>{user?.result.name}</h3>\r\n          <button onClick={logout}>Logout</button>\r\n        </div>\r\n      ) : (\r\n        <button onClick={handleButtonClick}>Sign In</button>\r\n      )}\r\n      {isPopupOpen && <Popup onClose={handleButtonClick} />}\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,UAAU;AAAC;AAAA;AAE7B,SAASC,MAAM,GAAG;EAAA;EAChB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGJ,QAAQ,CAACK,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;EAC3E,MAAMC,QAAQ,GAAGC,WAAW,EAAE;EAC9B,MAAMC,QAAQ,GAAGC,WAAW,EAAE;EAC9B,MAAMC,OAAO,GAAGC,WAAW,EAAE;EAE7B,MAAMC,MAAM,GAAG,MAAM;IACjBN,QAAQ,CAAC;MAAEO,IAAI,EAAEC,UAAU,CAACC;IAAO,CAAC,CAAC;IAErCL,OAAO,CAACM,IAAI,CAAC,OAAO,CAAC;IAErBf,OAAO,CAAC,IAAI,CAAC;EACf,CAAC;EAEHgB,SAAS,CAAC,MAAM;IACZ,MAAMC,KAAK,GAAGlB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEkB,KAAK;IAEzB,IAAIA,KAAK,EAAE;MACT,MAAMC,YAAY,GAAGC,MAAM,CAACF,KAAK,CAAC;MAElC,IAAIC,YAAY,CAACE,GAAG,GAAG,IAAI,GAAG,IAAIC,IAAI,EAAE,CAACC,OAAO,EAAE,EAAEX,MAAM,EAAE;IAC9D;IAEAX,OAAO,CAACC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;EACtD,CAAC,EAAE,CAACG,QAAQ,CAAC,CAAC;EAElB,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EAErD,SAAS6B,iBAAiB,GAAG;IAC3BD,cAAc,CAAC,CAACD,WAAW,CAAC;EAC9B;EAEA,oBACE;IAAA,uBACA;MAAA,WAEGxB,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAE2B,MAAM,gBACX;QAAA,wBACE;UAAK,GAAG,EAAE3B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2B,MAAM,CAACC,IAAK;UAAC,GAAG,EAAE5B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2B,MAAM,CAACE,QAAS;UAAA,UAAE7B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2B,MAAM,CAACC,IAAI,CAACE,MAAM,CAAC,CAAC;QAAC;UAAA;UAAA;UAAA;QAAA,QAAO,eAC5F;UAAA,UAAK9B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2B,MAAM,CAACC;QAAI;UAAA;UAAA;UAAA;QAAA,QAAM,eAC5B;UAAQ,OAAO,EAAEhB,MAAO;UAAA,UAAC;QAAM;UAAA;UAAA;UAAA;QAAA,QAAS;MAAA;QAAA;QAAA;QAAA;MAAA,QACpC,gBAEN;QAAQ,OAAO,EAAEc,iBAAkB;QAAA,UAAC;MAAO;QAAA;QAAA;QAAA;MAAA,QAC5C,EACAF,WAAW,iBAAI,QAAC,KAAK;QAAC,OAAO,EAAEE;MAAkB;QAAA;QAAA;QAAA;MAAA,QAAG;IAAA;MAAA;MAAA;MAAA;IAAA;EACjD,iBACH;AAEP;AAAC,GAjDQ3B,MAAM;AAAA,KAANA,MAAM;AAmDf,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}